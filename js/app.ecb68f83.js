(function(){"use strict";var t={2929:function(t,e,n){var o=n(9242),i=n(3396),r=n(7139);const l={ref:"canvas"},s=["onMousedown","onTouchstart"],a={id:"controls-row"},c={for:"text-for-curve"},u=(0,i.Uk)(" Enter text here: "),h={for:"text-color"},d=(0,i.Uk)(" Text Color "),f={for:"lines-on"},p=(0,i.Uk)(" Guidelines visible "),x={for:"rotate-letters"},v=(0,i.Uk)(" Rotate letters ");function y(t,e,n,y,g,m){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{id:"canvas-container",onMouseup:e[0]||(e[0]=(...e)=>t.dragEnd&&t.dragEnd(...e)),onTouchend:e[1]||(e[1]=(...e)=>t.dragEnd&&t.dragEnd(...e)),onMousemove:e[2]||(e[2]=(...e)=>t.drag&&t.drag(...e)),onTouchmove:e[3]||(e[3]=(...e)=>t.drag&&t.drag(...e))},[(0,i._)("canvas",l,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.points,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"control-point",key:n,style:(0,r.j5)(t.percentify(e)),onMousedown:e=>t.dragStart(n,e),onTouchstart:e=>t.dragStart(n,e)},null,44,s)))),128))],32),(0,i._)("div",a,[(0,i._)("label",c,[u,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[4]||(e[4]=e=>t.text=e),id:"text-for-curve"},null,512),[[o.nr,t.text]])]),(0,i._)("label",h,[(0,i.wy)((0,i._)("input",{type:"color",id:"text-color","onUpdate:modelValue":e[5]||(e[5]=e=>t.textColor=e)},null,512),[[o.nr,t.textColor]]),d]),(0,i._)("label",f,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"lines-on","onUpdate:modelValue":e[6]||(e[6]=e=>t.linesOn=e)},null,512),[[o.e8,t.linesOn]]),p]),(0,i._)("label",x,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"rotate-letters","onUpdate:modelValue":e[7]||(e[7]=e=>t.rotateLetters=e)},null,512),[[o.e8,t.rotateLetters]]),v]),(0,i._)("button",{onClick:e[8]||(e[8]=(...e)=>t.downloadPNG&&t.downloadPNG(...e))},"Download PNG")])],64)}var g=n(2482),m=n(4870),w=n(5287);class b{static distance(t,e){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}static computeLength(t){let e=0;for(let n=1;n<t.length;n++)e+=b.distance(t[n-1],t[n]);return e}static computeNormal(t,e){const n={x:e.x-t.x,y:e.y-t.y},o={x:-n.y,y:n.x},i=b.distance({x:0,y:0},o);return{x:o.x/i,y:o.y/i}}static lerp(t,e,n){return{x:e.x*n+t.x*(1-n),y:e.y*n+t.y*(1-n)}}constructor(t){(0,g.Z)(this,"points",void 0),(0,g.Z)(this,"length",void 0),this.points=t,this.length=b.computeLength(t)}}class T{get pointA(){return this.hull.points[this.pointAIndex]}get pointB(){return this.hull.points[this.pointBIndex]}get currentPoint(){return b.lerp(this.pointA,this.pointB,this.metaT)}get currentSegmentLength(){return b.distance(this.pointA,this.pointB)}get currentNormal(){const t=b.computeNormal(this.pointA,this.pointB);if(.5==this.metaT)return t;if(this.metaT<.5){if(0==this.pointAIndex)return t;{const e=b.computeNormal(this.hull.points[this.pointAIndex-1],this.pointA),n=.5+this.metaT;return b.lerp(e,t,n)}}if(this.pointBIndex==this.hull.points.length-1)return t;{const e=b.computeNormal(this.pointB,this.hull.points[this.pointBIndex+1]),n=this.metaT-.5;return b.lerp(t,e,n)}}constructor(t){(0,g.Z)(this,"hull",void 0),(0,g.Z)(this,"distanceWalked",0),(0,g.Z)(this,"pointAIndex",0),(0,g.Z)(this,"history",[]),(0,g.Z)(this,"pointBIndex",1),(0,g.Z)(this,"metaT",0),this.hull=t}advanceBy(t){let e=t;while(e>0){const t=b.distance(this.currentPoint,this.pointB);if(e<t)this.metaT+=e/this.currentSegmentLength,e=0;else{if(e-=t,this.pointBIndex+1>=this.hull.points.length){this.metaT=1;break}this.pointAIndex+=1,this.pointBIndex+=1,this.metaT=0}}this.distanceWalked+=t,this.history.push(this.distanceWalked)}}const k=20;function B(t,e,n,o,i,r,l,s){if(!t)return;const a=t.getContext("2d");if(a){if(a.clearRect(0,0,t.width,t.height),a.setLineDash([]),a.strokeStyle="black",a.lineWidth=2,e){a.beginPath(),a.moveTo(n.x,n.y),a.quadraticCurveTo(o.x,o.y,i.x,i.y),a.stroke();const t=[n,o,i],e=t.map((t=>[t.x-k/2,t.y-k/2,k,k]));a.fillStyle="lightblue";for(let n=0;n<3;n++)a.strokeRect(...e[n]),t[n].selected&&a.fillRect(...e[n]);a.fillStyle="#000",a.setLineDash([5,5]),a.beginPath(),a.moveTo(n.x,n.y),a.lineTo(o.x,o.y),a.lineTo(i.x,i.y),a.stroke()}if(r){const t=50;a.font=`${t}px LivvicBold`,a.textAlign="center";const e=Array.from(r);let c=e.map((t=>a.measureText(t).width)),u=c.reduce(((t,e)=>t+e));const h=new w.D(n,o,i),d=new b(h.getLUT(25)),f=u/d.length;a.font=`${Math.min(500,t/f)}px LivvicBold`,c=e.map((t=>a.measureText(t).width));const p=new T(d);u=c.reduce(((t,e)=>t+e)),console.log("final text width:",u),console.log("final hull length:",d.length);let x=d.length/2-u/2+c[0]/2;console.log("starting at position",x,"along the hull"),a.fillStyle=l;for(let n=0;n<e.length;n++){p.advanceBy(x-p.distanceWalked);const t=p.currentPoint;if(s){const e=p.currentNormal;a.translate(t.x,t.y),a.rotate((e.x>0?-1:1)*Math.acos(e.y)),a.translate(-t.x,-t.y)}a.fillText(e[n],t.x,t.y),a.resetTransform(),n<e.length-1&&(x+=c[n]/2+c[n+1]/2)}}}}const L=(0,i.aZ)({name:"App",setup(t){const e=(0,m.iH)(null),n=(0,m.iH)(""),o=(0,m.iH)("#000000"),r=(0,m.iH)(!0),l=(0,m.iH)(!0),s=(0,m.qj)([{x:0,y:0},{x:0,y:0},{x:0,y:0}]),a=(0,m.qj)({width:0,height:0}),c=Math.ceil(devicePixelRatio),u=()=>B(e.value,r.value,...s,n.value,o.value,l.value);(0,i.YP)([s,n,r,l,o],u),(0,i.bv)((()=>{if(!e.value)return;const t=Math.round(.9*window.innerWidth),n=Math.round(.8*window.innerHeight);a.height=e.value.height=n*c,a.width=e.value.width=t*c,e.value.style.width=t+"px",e.value.style.height=n+"px",s[0]={x:.25*a.width,y:.75*a.height},s[1]={x:.5*a.width,y:.25*a.height},s[2]={x:.75*a.width,y:.75*a.height}}));const h=t=>({left:t.x/a.width*100+"%",top:t.y/a.height*100+"%"});function d(t,e,n){return Math.min(Math.max(t,e),n)}let f=!1,p=!1,x=0,v={x:0,y:0};function y(t){if("touches"in t){const e=t.touches[0];return{x:e.clientX,y:e.clientY}}return{x:t.clientX,y:t.clientY}}function g(t,e){e.preventDefault(),f=!0,v=y(e),x=t,e.shiftKey?s[t].selected=!s[t].selected:s[t].selected||(T(),s[t].selected=!0)}function w(t){if(!f)return;if(!e.value)return;t.preventDefault(),p=!0;const n=y(t),o=(n.x-v.x)*c,i=(n.y-v.y)*c;for(const e of s)if(e.selected){const t={x:e.x+o,y:e.y+i};e.x=d(t.x,5,a.width-5),e.y=d(t.y,5,a.height-5)}v=n}function b(t){const e=t.target.classList.contains("control-point");p||t.shiftKey||(T(),e&&(s[x].selected=!0)),p=!1,f=!1}function T(){for(const t of s)t.selected=!1}function L(){if(!e.value)return;const t=r.value;r.value=!1,u(),e.value.toBlob((e=>{if(r.value=t,!e)return;const n=URL.createObjectURL(e),o=document.createElement("a");o.download="curve.png",o.href=n,o.click()}),"png")}return new FontFace("LivvicBold",'url("fonts/livvic-bold-webfont.woff2") format("woff2"),\n        url("fonts/livvic-bold-webfont.woff") format("woff")').load().then((t=>{document.fonts.add(t),u()})),{canvas:e,text:n,points:s,percentify:h,nativeRes:a,rect:k/devicePixelRatio,dragStart:g,drag:w,dragEnd:b,deselectPoints:T,linesOn:r,rotateLetters:l,downloadPNG:L,textColor:o}}}),_=()=>{(0,o.sj)((t=>({"517c8496":t.rect+"px"})))},O=L.setup;L.setup=O?(t,e)=>(_(),O(t,e)):_;var P=L,A=n(89);const M=(0,A.Z)(P,[["render",y]]);var j=M;(0,o.ri)(j).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,r){if(!o){var l=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],r=t[u][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(s=!1,r<l&&(l=r));if(s){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,l=o[0],s=o[1],a=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(a)var u=a(n)}for(e&&e(o);c<l.length;c++)r=l[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},o=self["webpackChunkv_arcs"]=self["webpackChunkv_arcs"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(2929)}));o=n.O(o)})();
//# sourceMappingURL=app.ecb68f83.js.map