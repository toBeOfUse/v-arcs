(function(){"use strict";var t={5434:function(t,e,n){var o=n(9242),i=n(3396),r=n(7139);const l={ref:"canvas"},s=["onMousedown","onTouchstart"],a={id:"controls-row"},u={for:"text-for-curve"},c=(0,i.Uk)(" Enter text here: "),h={for:"text-color"},d=(0,i.Uk)(" Text Color "),f={for:"lines-on"},p=(0,i.Uk)(" Guidelines visible "),v={for:"rotate-letters"},x=(0,i.Uk)(" Rotate letters ");function y(t,e,n,y,g,m){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{id:"canvas-container",onMouseup:e[0]||(e[0]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onMouseleave:e[1]||(e[1]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onTouchend:e[2]||(e[2]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onMousemove:e[3]||(e[3]=e=>t.movePoint(e)),onTouchmove:e[4]||(e[4]=e=>t.movePoint(e))},[(0,i._)("canvas",l,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.points,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"control-point",key:n,style:(0,r.j5)(t.percentify(e)),onMousedown:n=>{t.dropAllPoints(),e.moving=!0},onTouchstart:n=>{t.dropAllPoints(),e.moving=!0}},null,44,s)))),128))],32),(0,i._)("div",a,[(0,i._)("label",u,[c,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=e=>t.text=e),id:"text-for-curve"},null,512),[[o.nr,t.text]])]),(0,i._)("label",h,[(0,i.wy)((0,i._)("input",{type:"color",id:"text-color","onUpdate:modelValue":e[6]||(e[6]=e=>t.textColor=e)},null,512),[[o.nr,t.textColor]]),d]),(0,i._)("label",f,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"lines-on","onUpdate:modelValue":e[7]||(e[7]=e=>t.linesOn=e)},null,512),[[o.e8,t.linesOn]]),p]),(0,i._)("label",v,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"rotate-letters","onUpdate:modelValue":e[8]||(e[8]=e=>t.rotateLetters=e)},null,512),[[o.e8,t.rotateLetters]]),x]),(0,i._)("button",{onClick:e[9]||(e[9]=(...e)=>t.downloadPNG&&t.downloadPNG(...e))},"Download PNG")])],64)}var g=n(2482),m=n(4870),w=n(5287);class b{static distance(t,e){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}static computeLength(t){let e=0;for(let n=1;n<t.length;n++)e+=b.distance(t[n-1],t[n]);return e}static computeNormal(t,e){const n={x:e.x-t.x,y:e.y-t.y},o={x:-n.y,y:n.x},i=b.distance({x:0,y:0},o);return{x:o.x/i,y:o.y/i}}static lerp(t,e,n){return{x:e.x*n+t.x*(1-n),y:e.y*n+t.y*(1-n)}}constructor(t){(0,g.Z)(this,"points",void 0),(0,g.Z)(this,"length",void 0),this.points=t,this.length=b.computeLength(t)}}class k{get pointA(){return this.hull.points[this.pointAIndex]}get pointB(){return this.hull.points[this.pointBIndex]}get currentPoint(){return b.lerp(this.pointA,this.pointB,this.metaT)}get currentSegmentLength(){return b.distance(this.pointA,this.pointB)}get currentNormal(){const t=b.computeNormal(this.pointA,this.pointB);if(.5==this.metaT)return t;if(this.metaT<.5){if(0==this.pointAIndex)return t;{const e=b.computeNormal(this.hull.points[this.pointAIndex-1],this.pointA),n=.5+this.metaT;return b.lerp(e,t,n)}}if(this.pointBIndex==this.hull.points.length-1)return t;{const e=b.computeNormal(this.pointB,this.hull.points[this.pointBIndex+1]),n=this.metaT-.5;return b.lerp(t,e,n)}}constructor(t){(0,g.Z)(this,"hull",void 0),(0,g.Z)(this,"distanceWalked",0),(0,g.Z)(this,"pointAIndex",0),(0,g.Z)(this,"history",[]),(0,g.Z)(this,"pointBIndex",1),(0,g.Z)(this,"metaT",0),this.hull=t}advanceBy(t){let e=t;while(e>0){const t=b.distance(this.currentPoint,this.pointB);if(e<t)this.metaT+=e/this.currentSegmentLength,e=0;else{if(e-=t,this.pointBIndex+1>=this.hull.points.length){this.metaT=1;break}this.pointAIndex+=1,this.pointBIndex+=1,this.metaT=0}}this.distanceWalked+=t,this.history.push(this.distanceWalked)}}const P=20;function T(t,e,n,o,i,r,l,s){if(!t)return;const a=t.getContext("2d");if(a&&(a.clearRect(0,0,t.width,t.height),a.setLineDash([]),a.strokeStyle="black",a.lineWidth=2,e&&(a.beginPath(),a.moveTo(n.x,n.y),a.quadraticCurveTo(o.x,o.y,i.x,i.y),a.stroke(),a.strokeRect(n.x-P/2,n.y-P/2,P,P),a.strokeRect(o.x-P/2,o.y-P/2,P,P),a.strokeRect(i.x-P/2,i.y-P/2,P,P),a.setLineDash([5,5]),a.beginPath(),a.moveTo(n.x,n.y),a.lineTo(o.x,o.y),a.lineTo(i.x,i.y),a.stroke()),r)){const t=50;a.font=`${t}px LivvicBold`,a.textAlign="center";const e=Array.from(r);let u=e.map((t=>a.measureText(t).width)),c=u.reduce(((t,e)=>t+e));const h=new w.D(n,o,i),d=new b(h.getLUT(25)),f=c/d.length;a.font=`${Math.min(500,t/f)}px LivvicBold`,u=e.map((t=>a.measureText(t).width));const p=new k(d);c=u.reduce(((t,e)=>t+e)),console.log("final text width:",c),console.log("final hull length:",d.length);let v=d.length/2-c/2+u[0]/2;console.log("starting at position",v,"along the hull"),a.fillStyle=l;for(let n=0;n<e.length;n++){p.advanceBy(v-p.distanceWalked);const t=p.currentPoint;if(s){const e=p.currentNormal;a.translate(t.x,t.y),a.rotate((e.x>0?-1:1)*Math.acos(e.y)),a.translate(-t.x,-t.y)}a.fillText(e[n],t.x,t.y),a.resetTransform(),n<e.length-1&&(v+=u[n]/2+u[n+1]/2)}}}const A=(0,i.aZ)({name:"App",setup(t){const e=(0,m.iH)(null),n=(0,m.iH)(""),o=(0,m.iH)("#ffffff"),r=(0,m.iH)(!0),l=(0,m.iH)(!0),s=(0,m.qj)([{x:0,y:0},{x:0,y:0},{x:0,y:0}]),a=(0,m.qj)({width:0,height:0}),u=Math.ceil(devicePixelRatio),c=()=>T(e.value,r.value,...s,n.value,o.value,l.value);(0,i.YP)([s,n,r,l,o],c),(0,i.bv)((()=>{if(!e.value)return;const t=Math.round(.9*window.innerWidth),n=Math.round(.8*window.innerHeight);a.height=e.value.height=n*u,a.width=e.value.width=t*u,e.value.style.width=t+"px",e.value.style.height=n+"px",s[0]={x:.25*a.width,y:.75*a.height},s[1]={x:.5*a.width,y:.25*a.height},s[2]={x:.75*a.width,y:.75*a.height}}));const h=t=>({left:t.x/a.width*100+"%",top:t.y/a.height*100+"%"});function d(t,e,n){return Math.min(Math.max(t,e),n)}function f(t){const n=s.findIndex((t=>t.moving));if(-1==n)return;if(!e.value)return;const o=e.value.getBoundingClientRect();let i;t instanceof MouseEvent?i={x:t.clientX,y:t.clientY}:(t.preventDefault(),i={x:t.touches[0].clientX,y:t.touches[0].clientY});const r={x:(i.x-o.left)*u,y:(i.y-o.top)*u,moving:s[n].moving};r.x=d(r.x,5,a.width-5),r.y=d(r.y,5,a.height-5),s[n]=r}function p(){for(const t of s)t.moving=!1}function v(){if(!e.value)return;const t=r.value;r.value=!1,c(),e.value.toBlob((e=>{if(r.value=t,!e)return;const n=URL.createObjectURL(e),o=document.createElement("a");o.download="curve.png",o.href=n,o.click()}),"png")}return new FontFace("LivvicBold",'url("fonts/livvic-bold-webfont.woff2") format("woff2"),\n        url("fonts/livvic-bold-webfont.woff") format("woff")').load().then((t=>{document.fonts.add(t),c()})),{canvas:e,text:n,points:s,percentify:h,nativeRes:a,rect:P/devicePixelRatio,movePoint:f,dropAllPoints:p,linesOn:r,rotateLetters:l,downloadPNG:v,textColor:o}}}),B=()=>{(0,o.sj)((t=>({bb088142:t.rect+"px"})))},_=A.setup;A.setup=_?(t,e)=>(B(),_(t,e)):B;var L=A,M=n(89);const O=(0,M.Z)(L,[["render",y]]);var I=O;(0,o.ri)(I).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,r){if(!o){var l=1/0;for(c=0;c<t.length;c++){o=t[c][0],i=t[c][1],r=t[c][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(s=!1,r<l&&(l=r));if(s){t.splice(c--,1);var u=i();void 0!==u&&(e=u)}}return e}r=r||0;for(var c=t.length;c>0&&t[c-1][2]>r;c--)t[c]=t[c-1];t[c]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,l=o[0],s=o[1],a=o[2],u=0;if(l.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(a)var c=a(n)}for(e&&e(o);u<l.length;u++)r=l[u],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(c)},o=self["webpackChunkv_arcs"]=self["webpackChunkv_arcs"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(5434)}));o=n.O(o)})();
//# sourceMappingURL=app.e71a5ea5.js.map