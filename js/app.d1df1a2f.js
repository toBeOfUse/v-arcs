(function(){"use strict";var t={6363:function(t,e,n){var o=n(9242),i=n(3396),r=n(7139);const l={ref:"canvas"},s=["onMousedown","onTouchstart"],a={id:"controls-row"},c={for:"text-for-curve"},u=(0,i.Uk)(" Enter text here: "),h={for:"lines-on"},d=(0,i.Uk)(" Guidelines visible "),p={for:"rotate-letters"},v=(0,i.Uk)(" Rotate letters ");function f(t,e,n,f,x,y){return(0,i.wg)(),(0,i.iD)(i.HY,null,[(0,i._)("div",{id:"canvas-container",onMouseup:e[0]||(e[0]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onMouseleave:e[1]||(e[1]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onTouchend:e[2]||(e[2]=(...e)=>t.dropAllPoints&&t.dropAllPoints(...e)),onMousemove:e[3]||(e[3]=e=>t.movePoint(e)),onTouchmove:e[4]||(e[4]=e=>t.movePoint(e))},[(0,i._)("canvas",l,null,512),((0,i.wg)(!0),(0,i.iD)(i.HY,null,(0,i.Ko)(t.points,((e,n)=>((0,i.wg)(),(0,i.iD)("div",{class:"control-point",key:n,style:(0,r.j5)(t.percentify(e)),onMousedown:n=>{t.dropAllPoints(),e.moving=!0},onTouchstart:n=>{t.dropAllPoints(),e.moving=!0}},null,44,s)))),128))],32),(0,i._)("div",a,[(0,i._)("label",c,[u,(0,i.wy)((0,i._)("input",{type:"text","onUpdate:modelValue":e[5]||(e[5]=e=>t.text=e),id:"text-for-curve"},null,512),[[o.nr,t.text]])]),(0,i._)("label",h,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"lines-on","onUpdate:modelValue":e[6]||(e[6]=e=>t.linesOn=e)},null,512),[[o.e8,t.linesOn]]),d]),(0,i._)("label",p,[(0,i.wy)((0,i._)("input",{type:"checkbox",id:"rotate-letters","onUpdate:modelValue":e[7]||(e[7]=e=>t.rotateLetters=e)},null,512),[[o.e8,t.rotateLetters]]),v]),(0,i._)("button",{onClick:e[8]||(e[8]=(...e)=>t.downloadPNG&&t.downloadPNG(...e))},"Download PNG")])],64)}var x=n(2482),y=n(4870),g=n(5287);class m{static distance(t,e){return Math.sqrt((e.x-t.x)**2+(e.y-t.y)**2)}static computeLength(t){let e=0;for(let n=1;n<t.length;n++)e+=m.distance(t[n-1],t[n]);return e}constructor(t){(0,x.Z)(this,"points",void 0),(0,x.Z)(this,"length",void 0),this.points=t,this.length=m.computeLength(t)}}class w{get pointA(){return this.hull.points[this.pointAIndex]}get pointB(){return this.hull.points[this.pointBIndex]}static lerp(t,e,n){return{x:e.x*n+t.x*(1-n),y:e.y*n+t.y*(1-n)}}get currentPoint(){return w.lerp(this.pointA,this.pointB,this.metaT)}get currentSegmentLength(){return m.distance(this.pointA,this.pointB)}get currentNormal(){const t={x:this.pointB.x-this.pointA.x,y:this.pointB.y-this.pointA.y},e={x:-t.y,y:t.x},n=m.distance({x:0,y:0},e);return{x:e.x/n,y:e.y/n}}constructor(t){(0,x.Z)(this,"hull",void 0),(0,x.Z)(this,"distanceWalked",0),(0,x.Z)(this,"pointAIndex",0),(0,x.Z)(this,"history",[]),(0,x.Z)(this,"pointBIndex",1),(0,x.Z)(this,"metaT",0),this.hull=t}advanceBy(t){let e=t;while(e>0){const t=m.distance(this.currentPoint,this.pointB);if(e<t)this.metaT+=e/this.currentSegmentLength,e=0;else{if(e-=t,this.pointBIndex+1>=this.hull.points.length){this.metaT=1;break}this.pointAIndex+=1,this.pointBIndex+=1,this.metaT=0}}this.distanceWalked+=t,this.history.push(this.distanceWalked)}}const b=20;function P(t,e,n,o,i,r,l){if(!t)return;const s=t.getContext("2d");if(s&&(s.clearRect(0,0,t.width,t.height),s.setLineDash([]),s.strokeStyle="black",s.lineWidth=2,e&&(s.beginPath(),s.moveTo(n.x,n.y),s.quadraticCurveTo(o.x,o.y,i.x,i.y),s.stroke(),s.strokeRect(n.x-b/2,n.y-b/2,b,b),s.strokeRect(o.x-b/2,o.y-b/2,b,b),s.strokeRect(i.x-b/2,i.y-b/2,b,b),s.setLineDash([5,5]),s.beginPath(),s.moveTo(n.x,n.y),s.lineTo(o.x,o.y),s.lineTo(i.x,i.y),s.stroke()),r)){const t=50;s.font=`${t}px LivvicBold`,s.textAlign="center";const e=Array.from(r);let a=e.map((t=>s.measureText(t).width)),c=a.reduce(((t,e)=>t+e));const u=new g.D(n,o,i),h=new m(u.getLUT(25)),d=c/h.length;s.font=`${Math.min(500,t/d)}px LivvicBold`,a=e.map((t=>s.measureText(t).width));const p=new w(h);c=a.reduce(((t,e)=>t+e)),console.log("final text width:",c),console.log("final hull length:",h.length);let v=h.length/2-c/2+a[0]/2;console.log("starting at position",v,"along the hull");for(let n=0;n<e.length;n++){p.advanceBy(v-p.distanceWalked);const t=p.currentPoint;if(l){const e=p.currentNormal;s.translate(t.x,t.y),s.rotate((e.x>0?-1:1)*Math.acos(e.y)),s.translate(-t.x,-t.y)}s.fillText(e[n],t.x,t.y),s.resetTransform(),n<e.length-1&&(v+=a[n]/2+a[n+1]/2)}}}const k=(0,i.aZ)({name:"App",setup(t){const e=(0,y.iH)(null),n=(0,y.iH)(""),o=(0,y.iH)(!0),r=(0,y.iH)(!0),l=(0,y.qj)([{x:0,y:0},{x:0,y:0},{x:0,y:0}]),s=(0,y.qj)({width:0,height:0}),a=Math.ceil(devicePixelRatio),c=()=>P(e.value,o.value,...l,n.value,r.value);(0,i.YP)([l,n,o,r],c),(0,i.bv)((()=>{if(!e.value)return;const t=Math.round(.9*window.innerWidth),n=Math.round(.8*window.innerHeight);s.height=e.value.height=n*a,s.width=e.value.width=t*a,e.value.style.width=t+"px",e.value.style.height=n+"px",l[0]={x:.25*s.width,y:.75*s.height},l[1]={x:.5*s.width,y:.25*s.height},l[2]={x:.75*s.width,y:.75*s.height}}));const u=t=>({left:t.x/s.width*100+"%",top:t.y/s.height*100+"%"});function h(t){const n=l.findIndex((t=>t.moving));if(-1==n)return;if(!e.value)return;const o=e.value.getBoundingClientRect();let i;t instanceof MouseEvent?i={x:t.clientX,y:t.clientY}:(t.preventDefault(),i={x:t.touches[0].clientX,y:t.touches[0].clientY});const r={x:(i.x-o.left)*a,y:(i.y-o.top)*a,moving:l[n].moving};l[n]=r}function d(){for(const t of l)t.moving=!1}function p(){if(!e.value)return;const t=o.value;o.value=!1,c(),e.value.toBlob((e=>{if(o.value=t,!e)return;const n=URL.createObjectURL(e),i=document.createElement("a");i.download="curve.png",i.href=n,i.click()}),"png")}return{canvas:e,text:n,points:l,percentify:u,nativeRes:s,rect:b/devicePixelRatio,movePoint:h,dropAllPoints:d,linesOn:o,rotateLetters:r,downloadPNG:p}}}),T=()=>{(0,o.sj)((t=>({cd3edd64:t.rect+"px"})))},A=k.setup;k.setup=A?(t,e)=>(T(),A(t,e)):T;var B=k,O=n(89);const L=(0,O.Z)(B,[["render",f]]);var _=L;(0,o.ri)(_).mount("#app")}},e={};function n(o){var i=e[o];if(void 0!==i)return i.exports;var r=e[o]={exports:{}};return t[o](r,r.exports,n),r.exports}n.m=t,function(){var t=[];n.O=function(e,o,i,r){if(!o){var l=1/0;for(u=0;u<t.length;u++){o=t[u][0],i=t[u][1],r=t[u][2];for(var s=!0,a=0;a<o.length;a++)(!1&r||l>=r)&&Object.keys(n.O).every((function(t){return n.O[t](o[a])}))?o.splice(a--,1):(s=!1,r<l&&(l=r));if(s){t.splice(u--,1);var c=i();void 0!==c&&(e=c)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[o,i,r]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var o in e)n.o(e,o)&&!n.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:e[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,o){var i,r,l=o[0],s=o[1],a=o[2],c=0;if(l.some((function(e){return 0!==t[e]}))){for(i in s)n.o(s,i)&&(n.m[i]=s[i]);if(a)var u=a(n)}for(e&&e(o);c<l.length;c++)r=l[c],n.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return n.O(u)},o=self["webpackChunkv_arcs"]=self["webpackChunkv_arcs"]||[];o.forEach(e.bind(null,0)),o.push=e.bind(null,o.push.bind(o))}();var o=n.O(void 0,[998],(function(){return n(6363)}));o=n.O(o)})();
//# sourceMappingURL=app.d1df1a2f.js.map